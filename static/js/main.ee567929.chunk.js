(this["webpackJsonptodolist-ts"]=this["webpackJsonptodolist-ts"]||[]).push([[0],{100:function(t,e,n){t.exports={buttons:"Todolist_buttons__24-44"}},101:function(t,e,n){t.exports={title:"TodolistList_title__2a-hP",todolists:"TodolistList_todolists__31HnK"}},141:function(t,e,n){},166:function(t,e,n){"use strict";n.r(e);var a,c,i=n(0),r=n.n(i),o=n(34),s=n.n(o),l=(n(141),n(22)),u=n(17),d=n(15),j=n(118),b=n.n(j).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"e72442e7-e84c-4575-88b8-fbca240ffc79"}}),O=function(){return b.get("todo-lists")},f=function(t){return b.post("todo-lists",{title:t})},h=function(t){return b.delete("todo-lists/".concat(t))},p=function(t,e){return b.put("todo-lists/".concat(t),{title:e})},x=function(t){return b.get("todo-lists/".concat(t,"/tasks"))},m=function(t,e){return b.delete("todo-lists/".concat(t,"/tasks/").concat(e))},v=function(t,e){return b.post("todo-lists/".concat(t,"/tasks"),{title:e})},T=function(t,e,n){return b.put("todo-lists/".concat(t,"/tasks/").concat(e),n)},g=function(){return b.get("auth/me")},S=function(t,e,n,a){return b.post("auth/login",{email:t,password:e,rememberMe:n,captcha:a})},y=function(){return b.delete("auth/login")},C=function(){return b.get("security/get-captcha-url")};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(a||(a={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(c||(c={}));var k={status:"idle",error:null},E=function(t){return{type:"APP/SET-ERROR",error:t}},w=function(t){return{type:"APP/SET-STATUS",status:t}},I=function(t,e){t.messages.length?e(E(t.messages[0])):e(E("Some error occurred")),e(w("failed"))},_=function(t,e){e(E(t.message?t.message:"Some error occurred")),e(w("failed"))},A=[],D=n(233),L=n(232),N=n(10),R=n(223),U=n(237),P=n(121),M=n.n(P),H=n(2),K=r.a.memo((function(t){var e=t.addItem,n=t.disabled,a=void 0!==n&&n,c=t.label,r=Object(i.useState)(""),o=Object(N.a)(r,2),s=o[0],l=o[1],u=Object(i.useState)(null),d=Object(N.a)(u,2),j=d[0],b=d[1],O=function(){""!==s.trim()?(e(s),l("")):b("Title is required")};return Object(H.jsxs)("div",{style:{height:"100%",margin:"15px 5px"},children:[Object(H.jsx)(R.a,{variant:"outlined",disabled:a,error:!!j,value:s,onChange:function(t){l(t.currentTarget.value)},onKeyPress:function(t){null!==j&&b(null),13===t.charCode&&O()},label:c,helperText:j}),Object(H.jsx)(U.a,{onClick:O,disabled:a,style:{margin:"8px 5px"},children:Object(H.jsx)(M.a,{color:"primary"})})]})})),F=n(230),G=r.a.memo((function(t){var e=t.value,n=t.onChange,a=Object(i.useState)(!1),c=Object(N.a)(a,2),r=c[0],o=c[1],s=Object(i.useState)(e),l=Object(N.a)(s,2),u=l[0],d=l[1];return r?Object(H.jsx)(R.a,{value:u,onChange:function(t){d(t.currentTarget.value)},autoFocus:!0,onBlur:function(){o(!1),n(u)}}):Object(H.jsx)("div",{onDoubleClick:function(){o(!0),d(e)},style:{width:"200px",wordWrap:"break-word"},children:e})})),V=n(83),Y=n.n(V),B=n(226),z=n(3),J={},W=function(t,e,n){return function(a,c){var i=c().tasks[n].find((function(e){return e.id===t}));if(i){var r=Object(u.a)({deadline:i.deadline,description:i.description,priority:i.priority,startDate:i.startDate,title:i.title,status:i.status},e);T(n,t,r).then((function(c){if(0===c.data.resultCode){var i=function(t,e,n){return{type:"UPDATE-TASK",model:e,todolistId:n,taskId:t}}(t,e,n);a(i)}else I(c.data,a)})).catch((function(t){_(t,a)}))}else console.warn("task not found in the state")}},X=n(122),q=n.n(X),Q=n(123),Z=n.n(Q),$=n(89),tt=n.n($),et=r.a.memo((function(t){var e=t.task,n=t.todolistId,c=Object(l.b)(),r=Object(i.useCallback)((function(t,e){return c(function(t,e){return function(n){m(e,t).then((function(a){var c=function(t,e){return{type:"REMOVE-TASK",taskId:t,todolistId:e}}(t,e);n(c)}))}}(t,e))}),[e.id,n]),o=Object(i.useCallback)((function(t){return c(W(e.id,{title:t},n))}),[e.id,n]),s=Object(i.useCallback)((function(t,e,n){var i=e?a.Completed:a.New;c(W(t,{status:i},n))}),[e.id,n]);return Object(H.jsxs)("div",{className:tt.a.task+" "+"".concat(e.status===a.Completed?"".concat(tt.a.isDone):""),children:[Object(H.jsxs)("div",{className:tt.a.text,children:[Object(H.jsx)(B.a,{checked:e.status===a.Completed,icon:Object(H.jsx)(q.a,{}),checkedIcon:Object(H.jsx)(Z.a,{}),color:"default",onChange:function(t){s(e.id,t.currentTarget.checked,n)}}),Object(H.jsx)(G,{value:e.title,onChange:o})]}),Object(H.jsx)(U.a,{onClick:function(){return r(e.id,n)},children:Object(H.jsx)(Y.a,{})})]},e.id)})),nt=r.a.memo((function(t){var e=t.entityStatus,n=t.id,a=t.removeTodolist,c=t.value,i=t.onChange;return Object(H.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",margin:"10px 5px"},children:[Object(H.jsx)("span",{style:{fontSize:"20px",fontWeight:"700"},children:Object(H.jsx)(G,{value:c,onChange:i})}),Object(H.jsx)(U.a,{onClick:function(){return a(n)},disabled:"loading"===e,children:Object(H.jsx)(Y.a,{})})]})})),at=n(100),ct=n.n(at),it=r.a.memo((function(t){var e=t.todolist,n=t.tasks,c=Object(l.b)(),r=Object(i.useCallback)((function(t){return c(function(t,e){return function(n){n(w("loading")),v(e,t).then((function(t){if(0===t.data.resultCode){var e={type:"ADD-TASK",task:t.data.data.item};n(e),n(w("succeeded"))}else I(t.data,n)})).catch((function(t){_(t,n)}))}}(t,e.id))}),[e.id]),o=Object(i.useCallback)((function(t){return c((e=t,function(t){t(w("loading")),t({type:"CHANGE-TODOLIST-ENTITY-STATUS",id:e,status:"loading"}),h(e).then((function(n){t(function(t){return{type:"REMOVE-TODOLIST",id:t}}(e)),t(w("succeeded"))}))}));var e}),[e.id]),s=Object(i.useCallback)((function(t){return c(function(t,e){return function(n){p(t,e).then((function(a){0===a.data.resultCode?n(function(t,e){return{type:"CHANGE-TODOLIST-TITLE",id:t,title:e}}(t,e)):1===a.data.resultCode&&I(a.data,n)})).catch((function(t){_(t,n)}))}}(e.id,t))}),[e.id]),u=Object(i.useCallback)((function(t,e){return c({type:"CHANGE-TODOLIST-FILTER",id:e,filter:t})}),[]),d=Object(i.useCallback)((function(){return u("all",e.id)}),[e.id,u]),j=Object(i.useCallback)((function(){return u("active",e.id)}),[e.id,u]),b=Object(i.useCallback)((function(){return u("completed",e.id)}),[e.id,u]),O=n;return"active"===e.filter&&(O=n.filter((function(t){return t.status===a.New}))),"completed"===e.filter&&(O=n.filter((function(t){return t.status===a.Completed}))),Object(i.useEffect)((function(){var t;c((t=e.id,function(e){e(w("loading")),x(t).then((function(n){var a=n.data.items;e(function(t,e){return{type:"SET-TASKS",tasks:t,todolistId:e}}(a,t)),e(w("succeeded"))}))}))}),[e]),Object(H.jsxs)("div",{className:ct.a.todolist,children:[Object(H.jsx)(nt,{value:e.title,onChange:s,id:e.id,entityStatus:e.entityStatus,removeTodolist:o}),Object(H.jsx)(K,{addItem:r,disabled:"loading"===e.entityStatus,label:"Title for task"}),Object(H.jsx)("div",{children:O&&O.map((function(t){return Object(H.jsx)(et,{task:t,todolistId:e.id},t.id)}))}),Object(H.jsxs)("div",{className:ct.a.buttons,children:[Object(H.jsx)(F.a,{variant:"all"===e.filter?"contained":"outlined",onClick:d,color:"primary",children:"All"}),Object(H.jsx)(F.a,{variant:"active"===e.filter?"contained":"outlined",onClick:j,color:"primary",children:"Active"}),Object(H.jsx)(F.a,{variant:"completed"===e.filter?"contained":"outlined",onClick:b,color:"primary",children:"Completed"})]})]})})),rt=n(127),ot=n(16),st=n(21),lt="AUTH_SET_USER_DATA",ut="GET_CAPTCHA_URL_SUCCESS",dt="SET_ERROR",jt={id:null,email:null,login:null,isAuth:!1,captchaUrl:null,error:""},bt=function(t,e,n,a){return{type:lt,payload:{id:t,email:e,login:n,isAuth:a}}},Ot=function(t){return{type:ut,payload:{captchaUrl:t}}},ft=function(t){return{type:dt,payload:t}},ht=function(){return function(){var t=Object(st.a)(Object(ot.a)().mark((function t(e){var n,a,c,i,r;return Object(ot.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(w("loading")),t.next=3,g();case 3:0===(n=t.sent).data.resultCode&&(a=n.data.data,c=a.id,i=a.login,r=a.email,e(bt(c,r,i,!0))),e(w("idle"));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},pt=function(){return function(){var t=Object(st.a)(Object(ot.a)().mark((function t(e){var n,a;return Object(ot.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(w("loading")),t.next=3,C();case 3:n=t.sent,a=n.data.url,e(Ot(a)),e(w("idle"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},xt=n(11),mt=n(59),vt=n.n(mt),Tt=n(238),gt=n(228),St=function(){var t=Object(l.b)(),e=Object(l.c)((function(t){return t.auth})),n=e.isAuth,a=e.captchaUrl,c=e.error;return n?Object(H.jsx)(xt.a,{to:"/ToDoList/"}):Object(H.jsxs)("div",{className:vt.a.container,children:[Object(H.jsxs)("div",{className:vt.a.text,children:["Hello! You can register",Object(H.jsx)("a",{href:"https://social-network.samuraijs.com/",target:"_blank",children:"here"}),"or use this data to log in:",Object(H.jsxs)("div",{className:vt.a.dataText,children:[Object(H.jsxs)("div",{children:["Email: ",Object(H.jsx)("span",{children:"free@samuraijs.com"})]}),Object(H.jsxs)("div",{children:["Password: ",Object(H.jsx)("span",{children:"free"})]})]})]}),Object(H.jsx)(rt.a,{initialValues:{email:"",password:"",rememberMe:!1,captchaUrl:void 0},validate:function(t){t.email},onSubmit:function(e){var n,a,c,i;t((n=e.email,a=e.password,c=e.rememberMe,i=e.captchaUrl,function(){var t=Object(st.a)(Object(ot.a)().mark((function t(e){var r,o;return Object(ot.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(w("loading")),t.next=3,S(n,a,c,i);case 3:0===(r=t.sent).data.resultCode?e(ht()):(10===r.data.resultCode&&e(pt()),o=r.data.messages.length>0?r.data.messages[0]:"Some error",e(ft(o))),e(w("idle"));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},children:function(t){var e=t.values,n=t.errors,i=t.touched,r=t.handleChange,o=t.handleBlur,s=t.handleSubmit;return Object(H.jsxs)("form",{onSubmit:s,children:[Object(H.jsx)("div",{className:vt.a.textFild,children:"Your email"}),Object(H.jsx)(R.a,{type:"email",name:"email",onChange:r,onBlur:o,value:e.email}),n.email&&i.email&&n.email,Object(H.jsx)("div",{className:vt.a.textFild,children:"Your password"}),Object(H.jsx)(R.a,{type:"password",name:"password",onChange:r,onBlur:o,value:e.password}),n.password&&i.password&&n.password,Object(H.jsx)(Tt.a,{children:Object(H.jsx)(gt.a,{control:Object(H.jsx)(B.a,{name:"rememberMe",onChange:r,checked:e.rememberMe}),label:"Remember me"})}),a&&Object(H.jsxs)("div",{children:[Object(H.jsx)("p",{style:{textAlign:"center"},children:Object(H.jsx)("img",{src:a,alt:"captcha"})}),Object(H.jsx)(R.a,{type:"text",name:"captchaUrl",onChange:r,onBlur:o,value:e.captchaUrl})]}),c&&Object(H.jsx)("div",{style:{border:"#f32020 2px solid",padding:"10px",color:"#fc8d8d",borderRadius:"7px",margin:"10px 0"},children:Object(H.jsx)("p",{style:{textAlign:"center",margin:"0"},children:c})}),Object(H.jsx)(F.a,{type:"submit",variant:"contained",children:"Submit"})]})}})]})},yt=n(101),Ct=n.n(yt),kt=function(){var t=Object(l.c)((function(t){return t.todolists})),e=Object(l.c)((function(t){return t.tasks})),n=Object(l.c)((function(t){return t.auth})).isAuth,a=Object(l.b)();Object(i.useEffect)((function(){a((function(t){t(w("loading")),O().then((function(e){t({type:"SET-TODOLISTS",todolists:e.data}),t(w("succeeded"))}))}))}),[n]);var c=Object(i.useCallback)((function(t){a(function(t){return function(e){e(w("loading")),f(t).then((function(t){e({type:"ADD-TODOLIST",todolist:t.data.data.item}),e(w("succeeded"))}))}}(t))}),[]);return Object(H.jsx)(H.Fragment,{children:n?Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(D.a,{container:!0,className:Ct.a.title,children:Object(H.jsx)(K,{addItem:c,label:"Title for to do list"})}),Object(H.jsx)(D.a,{container:!0,children:Object(H.jsx)("div",{className:Ct.a.todolists,children:t.map((function(t){var n=e[t.id];if(n)return Object(H.jsx)(D.a,{item:!0,children:Object(H.jsx)(L.a,{style:{padding:"10px",margin:"20px",width:"330px"},children:Object(H.jsx)(it,{todolist:t,tasks:n})})},t.id)}))})})]}):Object(H.jsx)(St,{})})},Et=n(234),wt=n(235),It=n(231),_t=n(236),At=n(227),Dt=n(224),Lt=r.a.forwardRef((function(t,e){return Object(H.jsx)(Dt.a,Object(u.a)({elevation:6,ref:e,variant:"filled"},t))}));function Nt(){var t=Object(l.c)((function(t){return t.app.error})),e=Object(l.b)(),n=function(t,n){"clickaway"!==n&&e(E(null))};return Object(H.jsx)("div",{style:{margin:"0 auto"},children:Object(H.jsx)(At.a,{open:null!==t,autoHideDuration:6e3,onClose:n,children:Object(H.jsx)(Lt,{onClose:n,severity:"error",sx:{width:"100%"},children:t})})})}var Rt=n(64);var Ut=function(){var t=Object(l.c)((function(t){return t.app.status})),e=Object(l.c)((function(t){return t.auth})).isAuth,n=Object(l.b)();return Object(i.useEffect)((function(){n(ht())}),[]),Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(Nt,{}),Object(H.jsx)(Et.a,{position:"relative",children:Object(H.jsxs)(It.a,{fixed:!0,children:[Object(H.jsx)(wt.a,{style:{display:"flex",justifyContent:"flex-end"},children:e&&Object(H.jsx)(Rt.b,{to:"/ToDoList/login",style:{color:"white",textDecoration:"none"},children:Object(H.jsx)(F.a,{color:"inherit",variant:"outlined",onClick:function(){n(function(){var t=Object(st.a)(Object(ot.a)().mark((function t(e){return Object(ot.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(w("loading")),t.next=3,y();case 3:0===t.sent.data.resultCode&&e(bt(null,null,null,!1)),e(ft("")),e(w("idle"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},children:"Logout"})})}),"loading"===t&&Object(H.jsx)(_t.a,{style:{position:"absolute",bottom:"-4px",width:"100%"}})]})}),Object(H.jsx)(It.a,{fixed:!0,style:{margin:"20px auto"},children:Object(H.jsxs)(xt.d,{children:[Object(H.jsx)(xt.b,{path:"/ToDoList/",element:Object(H.jsx)(kt,{})}),Object(H.jsx)(xt.b,{path:"/ToDoList/login",element:Object(H.jsx)(St,{})})]})})]})},Pt=n(69),Mt=n(126),Ht=Object(Pt.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TASK":return Object(u.a)(Object(u.a)({},t),{},Object(z.a)({},e.todolistId,t[e.todolistId].filter((function(t){return t.id!==e.taskId}))));case"ADD-TASK":return Object(u.a)(Object(u.a)({},t),{},Object(z.a)({},e.task.todoListId,[e.task].concat(Object(d.a)(t[e.task.todoListId]))));case"UPDATE-TASK":return Object(u.a)(Object(u.a)({},t),{},Object(z.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(u.a)(Object(u.a)({},t),e.model):t}))));case"ADD-TODOLIST":return Object(u.a)(Object(u.a)({},t),{},Object(z.a)({},e.todolist.id,[]));case"REMOVE-TODOLIST":var n=Object(u.a)({},t);return delete n[e.id],n;case"SET-TODOLISTS":var a=Object(u.a)({},t);return e.todolists.forEach((function(t){a[t.id]=[]})),a;case"SET-TASKS":return Object(u.a)(Object(u.a)({},t),{},Object(z.a)({},e.todolistId,e.tasks));default:return t}},todolists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.id}));case"ADD-TODOLIST":return[Object(u.a)(Object(u.a)({},e.todolist),{},{filter:"all",entityStatus:"idle"})].concat(Object(d.a)(t));case"CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.id?Object(u.a)(Object(u.a)({},t),{},{title:e.title}):t}));case"CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.id?Object(u.a)(Object(u.a)({},t),{},{filter:e.filter}):t}));case"CHANGE-TODOLIST-ENTITY-STATUS":return t.map((function(t){return t.id===e.id?Object(u.a)(Object(u.a)({},t),{},{entityStatus:e.status}):t}));case"SET-TODOLISTS":return e.todolists.map((function(t){return Object(u.a)(Object(u.a)({},t),{},{filter:"all",entityStatus:"idle"})}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(u.a)(Object(u.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(u.a)(Object(u.a)({},t),{},{error:e.error});default:return Object(u.a)({},t)}},auth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case lt:case ut:return Object(u.a)(Object(u.a)({},t),e.payload);case dt:return Object(u.a)(Object(u.a)({},t),{},{error:e.payload});default:return t}}}),Kt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Pt.c,Ft=Object(Pt.d)(Ht,Kt(Object(Pt.a)(Mt.a)));window.store=Ft,s.a.render(Object(H.jsx)(r.a.StrictMode,{children:Object(H.jsx)(l.a,{store:Ft,children:Object(H.jsx)(Rt.a,{children:Object(H.jsx)(Ut,{})})})}),document.getElementById("root"))},59:function(t,e,n){t.exports={container:"Login_container__1Oz4Y",title:"Login_title__bh47u",text:"Login_text__llltc",dataText:"Login_dataText__1W4jP",textFild:"Login_textFild__m8VTG"}},89:function(t,e,n){t.exports={task:"Task_task__1IAtP",text:"Task_text__7szr-",isDone:"Task_isDone__J6EDt"}}},[[166,1,2]]]);
//# sourceMappingURL=main.ee567929.chunk.js.map